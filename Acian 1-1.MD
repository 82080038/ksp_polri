bikin **aplikasi koperasi yang â€œngenaâ€ dan tidak missed**, memang *wajib* paham koperasi **dari hulu ke hilir**â€”bukan cuma soal transaksi, tapi juga **aturan, budaya, dan praktik lapangan**.

Mari kita susun pembahasan ini **bertahap & sistematis**, seperti fondasi sebelum coding.

---

## 1ï¸âƒ£ Memahami Hakikat Koperasi (Bukan Sekadar Aplikasi Keuangan)

**Koperasi itu bukan perusahaan biasa.**
Ciri khas yang *harus tercermin di aplikasi*:

### ğŸ”¹ Prinsip Koperasi (wajib!)

1. **Keanggotaan sukarela & terbuka**
2. **Pengelolaan demokratis**
   â†’ 1 anggota = 1 suara (bukan 1 saham = 1 suara)
3. **Partisipasi ekonomi anggota**
4. **SHU dibagi adil sesuai jasa anggota**
5. **Transparansi & akuntabilitas**

ğŸ‘‰ Kalau aplikasi **tidak mendukung transparansi & laporan SHU**, itu sudah â€œmissâ€.

---

## 2ï¸âƒ£ Jenis Koperasi (Ini Sangat Menentukan Fitur)

â— *Aplikasi koperasi tidak bisa â€œone size fits allâ€*

### Jenis umum:

1. **Koperasi Simpan Pinjam (KSP)**
2. **Koperasi Konsumen**
3. **Koperasi Produsen**
4. **Koperasi Jasa**
5. **Koperasi Serba Usaha (KSU)**

ğŸ“Œ **Pertanyaan kunci sebelum desain sistem**:

* Fokus **simpan pinjam saja?**
* Atau **koperasi desa / pegawai / sekolah?**
* Ada **unit usaha** selain pinjaman?

â¡ï¸ Jawaban ini menentukan **struktur database & modul utama**.

---

## 3ï¸âƒ£ Struktur Organisasi Koperasi (Wajib Ada di Aplikasi)

Minimal, koperasi punya:

### ğŸ§© Peran inti:

* **Anggota**
* **Pengurus**
* **Pengawas**
* **Pengelola / Admin**

ğŸ“Œ Implikasi ke aplikasi:

* **Role & hak akses berbeda**
* Pengurus bisa *approve*
* Pengawas bisa *audit & lihat laporan*
* Anggota bisa *lihat simpanan, pinjaman, SHU*

â¡ï¸ Ini bukan sekadar login biasa.

---

## 4ï¸âƒ£ Komponen Keuangan Koperasi (Paling Sering Terlewat)

### ğŸ’° Jenis Simpanan:

1. **Simpanan Pokok** (sekali)
2. **Simpanan Wajib** (periodik)
3. **Simpanan Sukarela**

â— Aplikasi harus:

* Bisa **kunci simpanan pokok**
* Wajib bisa **rekap per anggota**
* Support **riwayat transaksi panjang**

---

### ğŸ’³ Pinjaman:

* Plafon
* Bunga / jasa
* Tenor
* Denda
* Angsuran

ğŸ“Œ Banyak aplikasi gagal karena:

* Tidak fleksibel (bunga flat vs menurun)
* Tidak bisa koreksi angsuran
* Tidak bisa reschedule

---

## 5ï¸âƒ£ SHU (Sisa Hasil Usaha) â€“ Bagian Paling Krusial

Ini **nyawa koperasi**.

SHU dibagi berdasarkan:

* Jasa modal (simpanan)
* Jasa usaha (pinjaman / transaksi)
* Cadangan
* Dana sosial
* Dana pengurus

ğŸ“Œ Aplikasi harus:

* Bisa **hitung otomatis**
* Transparan
* Bisa **simulasi sebelum RAT**
* Bisa cetak laporan SHU per anggota

â— *Kalau SHU cuma di-Excel di luar sistem â†’ itu missed besar.*

---

## 6ï¸âƒ£ RAT & Legalitas (Sering Dilupakan Developer)

### RAT (Rapat Anggota Tahunan):

* Laporan keuangan
* Laporan pengurus
* Laporan pengawas
* Pembagian SHU

ğŸ“Œ Aplikasi ideal:

* Menyediakan **laporan RAT otomatis**
* Arsip keputusan RAT
* Periode tahunan (multi-tahun)

---

## 7ï¸âƒ£ Laporan Wajib (Kalau Ini Tidak Ada â†’ Aplikasi Ditolak)

Minimal:

* Neraca
* SHU / Laba Rugi koperasi
* Buku besar
* Rekap simpanan
* Rekap pinjaman
* Tunggakan
* Arus kas

â¡ï¸ **Akuntansi koperasi â‰  akuntansi perusahaan murni**

---

## 8ï¸âƒ£ Kesalahan Umum Saat Membuat Aplikasi Koperasi

ğŸš« Disamakan dengan:

* Aplikasi bank
* Aplikasi fintech
* Aplikasi kas biasa

ğŸš« Tidak ada:

* SHU
* RAT
* Hak suara anggota
* Pengawasan internal

---

## 9ï¸âƒ£ Pendekatan Paling Aman untuk Kita

Saya sarankan kita pakai pendekatan ini:

### ğŸ§± Fase 1 â€“ Fondasi

* Model koperasi (jenis & skala)
* Regulasi & praktik lapangan
* Struktur data inti

### ğŸ§© Fase 2 â€“ Modul

* Keanggotaan
* Simpanan
* Pinjaman
* SHU
* Laporan

### ğŸ§  Fase 3 â€“ Kecerdasan & Audit

* Notifikasi tunggakan
* Analisis kesehatan koperasi
* Deteksi anomali transaksi

---


**KSP Personel POLRI** itu *spesifik*, *sensitif*, dan *sangat jelas kebutuhannya*.

# ğŸŸ¦ KARAKTER KHUSUS KSP PERSONEL POLRI

*(Ini fondasi utama desain aplikasi)*

## 1ï¸âƒ£ Profil Anggota (Tidak Seperti Koperasi Umum)

**Anggota = Personel aktif POLRI**

* NRP (unik & krusial)
* Pangkat
* Satuan / Fungsi (SPKT, Reskrim, Intel, dll.)
* Status dinas (aktif, pindah, pensiun)
* Gaji & tunjangan (implisit, sensitif)

ğŸ“Œ **Implikasi sistem:**

* NRP **primary identity**, bukan NIK
* Status anggota **berubah dinamis**
* Riwayat anggota **tidak boleh dihapus**

---

## 2ï¸âƒ£ Pola Simpanan Khas POLRI

### ğŸ’° Simpanan:

1. **Pokok** â†’ sekali saat masuk
2. **Wajib** â†’ *potong gaji*
3. **Sukarela** â†’ opsional

ğŸ“Œ **Aplikasi harus bisa:**

* Set **potongan otomatis per bulan**
* Potongan berbeda per pangkat / kebijakan
* Toleransi *telat setor* (karena administrasi)

â— *Excel manual = sumber konflik koperasi.*

---

## 3ï¸âƒ£ Pinjaman Khas Personel POLRI

### ğŸ’³ Pola nyata:

* Pinjaman konsumtif (motor, renovasi, dll.)
* Tenor mengikuti sisa masa dinas
* Angsuran via potong gaji

ğŸ“Œ **Fitur wajib:**

* Plafon = % dari gaji bersih
* Validasi **sisa masa dinas**
* Simulasi pinjaman sebelum pengajuan
* Auto-stop jika status pindah / pensiun

---

## 4ï¸âƒ£ Risiko & Pengamanan (Ini Penting)

âš ï¸ **Risiko khusus POLRI:**

* Mutasi
* Pindah satuan
* Pensiun mendadak
* Kasus disiplin

ğŸ“Œ **Implikasi sistem:**

* Flag status anggota
* Freeze pinjaman otomatis
* Notifikasi ke pengurus
* Log audit tidak bisa dihapus

---

## 5ï¸âƒ£ Struktur Organisasi Koperasi POLRI

### Role nyata:

* **Anggota**
* **Pengurus** (Ketua, Sekretaris, Bendahara)
* **Pengawas**
* **Admin operator**

ğŸ“Œ **Role-based access ketat**

* Anggota **tidak bisa ubah data keuangan**
* Pengawas **read-only + audit log**
* Bendahara **otorisasi keuangan**

---

## 6ï¸âƒ£ SHU Versi KSP POLRI (Sering Salah Kaprah)

SHU dibagi berdasarkan:

* Simpanan (jasa modal)
* Pinjaman (jasa usaha)
* Cadangan
* Dana sosial (sering untuk kegiatan internal)
* Dana pengurus

ğŸ“Œ **Aplikasi wajib:**

* SHU per anggota **otomatis & transparan**
* Bisa cetak *per NRP*
* Bisa dikunci setelah RAT

---

## 7ï¸âƒ£ RAT & Akuntabilitas Internal

ğŸ“‘ RAT di lingkungan POLRI itu **sensitif**:

* Harus rapi
* Bisa diaudit
* Tidak multitafsir

ğŸ“Œ Sistem harus:

* Arsip laporan per tahun
* Lock data setelah RAT
* Riwayat keputusan RAT

---

## 8ï¸âƒ£ Laporan yang Wajib Ada (Minimal)

### ğŸ“Š Keuangan:

* Neraca
* Perhitungan SHU
* Arus kas
* Buku besar

### ğŸ“‹ Operasional:

* Simpanan per personel
* Pinjaman aktif
* Tunggakan
* Mutasi anggota

---

## 9ï¸âƒ£ Kesalahan Fatal Kalau Ini Tidak Dipahami

âŒ Anggota keluar â†’ data dihapus
âŒ Pinjaman tidak dikaitkan status dinas
âŒ SHU dihitung manual
âŒ Tidak ada audit log

â¡ï¸ Di KSP POLRI, ini bisa **jadi temuan pengawas**.

---

# ğŸ§± ARSITEKTUR APLIKASI (Ringkas tapi Tepat)

### Layer:

* **Frontend**: Anggota & Pengurus
* **Backend**: Logic koperasi + aturan POLRI
* **Database**: Immutable logs + keuangan

### Prinsip:

* Data **tidak boleh hilang**
* Semua perubahan **tercatat**
* Transparansi > kecepatan

---
**sesuai urutan yang diusulkan**, lalu diakhiri dengan **flow lengkap KSP POLRI dari anggota masuk sampai RAT**.
**versi konseptual + operasional**

---

# ğŸ§­ BAGIAN 1 â€” FLOW BISNIS KSP POLRI (END-TO-END)

## 1ï¸âƒ£ Pendaftaran Anggota (Personel POLRI)

**Input awal:**

* NRP (unik)
* Nama
* Pangkat
* Satuan
* Status dinas (aktif)
* Tanggal masuk koperasi

**Proses:**

* Validasi NRP (tidak duplikat)
* Set status anggota = `AKTIF`
* Set kewajiban simpanan pokok

**Output sistem:**

* Anggota resmi
* Akun login dibuat
* Masuk periode buku berjalan

ğŸ“Œ **Catatan penting sistem**

> Anggota **tidak pernah dihapus**, hanya status berubah

---

## 2ï¸âƒ£ Simpanan Anggota (Bulanan & Insidentil)

### Jenis simpanan:

* Simpanan Pokok â†’ sekali
* Simpanan Wajib â†’ bulanan (potong gaji)
* Simpanan Sukarela â†’ fleksibel

**Flow:**

* Sistem generate tagihan bulanan
* Bendahara input realisasi / import data
* Sistem mencatat histori simpanan

ğŸ“Œ Harus bisa:

* Perbedaan nominal per kebijakan
* Koreksi dengan jejak audit

---

## 3ï¸âƒ£ Pengajuan Pinjaman

**Input anggota:**

* Nominal pinjaman
* Tenor
* Tujuan

**Validasi sistem otomatis:**

* Status anggota = aktif
* Tidak ada pinjaman bermasalah
* Sisa masa dinas mencukupi
* Plafon sesuai kebijakan

**Status:**

* DRAFT â†’ DIAJUKAN â†’ DISETUJUI / DITOLAK

ğŸ“Œ **Belum ada uang keluar di tahap ini**

---

## 4ï¸âƒ£ Persetujuan & Pencairan Pinjaman

**Peran pengurus:**

* Ketua / Bendahara menyetujui

**Proses sistem:**

* Generate jadwal angsuran
* Hitung jasa/bunga
* Aktifkan potongan bulanan
* Catat pencairan

ğŸ“Œ Jika anggota:

* Mutasi â†’ status dipantau
* Pensiun â†’ pinjaman di-freeze

---

## 5ï¸âƒ£ Angsuran & Monitoring

**Bulanan:**

* Sistem generate kewajiban angsuran
* Bendahara input realisasi
* Sistem update saldo pinjaman

**Monitoring otomatis:**

* Tunggakan
* Pinjaman hampir lunas
* Anggota risiko tinggi

---

## 6ï¸âƒ£ Perubahan Status Anggota

Status bisa berubah:

* AKTIF
* MUTASI
* PENSIUN
* KELUAR

ğŸ“Œ Implikasi:

* Tidak bisa ajukan pinjaman baru
* Simpanan tetap tercatat
* SHU tetap dihitung sesuai periode aktif

---

## 7ï¸âƒ£ Akhir Tahun Buku

**Sistem otomatis:**

* Tutup transaksi tahun berjalan
* Rekap:

  * Total jasa pinjaman
  * Total simpanan
  * Biaya operasional
* Hitung SHU koperasi

---

## 8ï¸âƒ£ Perhitungan SHU Anggota

SHU dibagi berdasarkan:

* Jasa modal (simpanan)
* Jasa usaha (pinjaman)
* Dana cadangan
* Dana sosial
* Dana pengurus

ğŸ“Œ Output:

* SHU per anggota (berdasarkan NRP)
* Laporan transparan
* Bisa disimulasikan sebelum RAT

---

## 9ï¸âƒ£ RAT (Rapat Anggota Tahunan)

**Disajikan oleh sistem:**

* Laporan keuangan
* Laporan pengurus
* Laporan pengawas
* Perhitungan SHU

**Keputusan RAT:**

* SHU disahkan
* Kebijakan baru dicatat

ğŸ“Œ Setelah RAT:

* Data tahun tersebut **dikunci**
* Tidak bisa diubah tanpa log khusus

---

# ğŸ§± BAGIAN 2 â€” STRUKTUR DATABASE INTI (RINGKAS PRODUKSI)

### Tabel inti:

* anggota
* simpanan
* pinjaman
* angsuran
* transaksi_keuangan
* shu_rekap
* shu_anggota
* rat
* audit_log
* users & roles

ğŸ“Œ Prinsip:

* Soft delete
* Immutable log
* Multi-tahun

---

# ğŸ” BAGIAN 3 â€” ATURAN PINJAMAN & POTONGAN GAJI

### Aturan:

* 1 anggota = 1 pinjaman aktif
* Angsuran â‰¤ persentase tertentu
* Tenor â‰¤ sisa masa dinas
* Potongan otomatis bulanan

ğŸ“Œ Sistem **tidak boleh manual penuh**

---

# ğŸ§® BAGIAN 4 â€” SHU ENGINE (KONSEP)

```
SHU = Pendapatan jasa pinjaman
    + pendapatan lain
    - biaya operasional
```

Distribusi:

* x% jasa modal
* y% jasa usaha
* z% cadangan
* dst

ğŸ“Œ Semua **parameter configurable**, bukan hardcode

---

# ğŸ§‘â€âš–ï¸ BAGIAN 5 â€” HAK AKSES & AUDIT

| Role     | Hak                 |
| -------- | ------------------- |
| Anggota  | Lihat data sendiri  |
| Pengurus | Kelola transaksi    |
| Pengawas | Lihat semua + audit |
| Admin    | Teknis sistem       |

ğŸ“Œ Semua aksi â†’ `audit_log`

---

# ğŸ”· BAGIAN 6 â€” FLOW LENGKAP KSP POLRI (TEKS VISUAL)

```
[Personel POLRI]
       |
       v
[Daftar Anggota KSP]
       |
       v
[Bayar Simpanan Pokok]
       |
       v
[Simpanan Wajib Bulanan]
       |
       +-------------------+
       |                   |
       v                   v
[Ajukan Pinjaman]     [Simpanan Sukarela]
       |
       v
[Validasi Sistem]
       |
       v
[Persetujuan Pengurus]
       |
       v
[Pencairan Pinjaman]
       |
       v
[Angsuran Bulanan]
       |
       v
[Monitoring & Audit]
       |
       v
[Akhir Tahun Buku]
       |
       v
[Perhitungan SHU]
       |
       v
[RAT]
       |
       v
[Penguncian Data Tahun]
       |
       v
[Periode Baru]
```

---
**level produksi** 
ini sudah **siap langsung jadi dasar coding**, bukan sekadar konsep.

**3 bagian besar** :

1ï¸âƒ£ **ERD detail (tabel + relasi)**
2ï¸âƒ£ **Flow frontend (layar per role)**
3ï¸âƒ£ **Skeleton backend (struktur folder + API)**

---

# 1ï¸âƒ£ ERD DETAIL â€“ KSP PERSONEL POLRI

## ğŸ”‘ Prinsip Desain ERD

* **NRP = identitas utama anggota**
* Data **tidak pernah dihapus**
* Semua transaksi **berjejak (audit trail)**
* Multi-tahun (tahun buku)

---

## ğŸ“˜ TABEL INTI

### ğŸ§â€â™‚ï¸ `anggota`

| Field        | Tipe                                 | Keterangan |
| ------------ | ------------------------------------ | ---------- |
| id           | BIGINT PK                            |            |
| nrp          | VARCHAR(20) UNIQUE                   |            |
| nama         | VARCHAR(100)                         |            |
| pangkat      | VARCHAR(30)                          |            |
| satuan       | VARCHAR(100)                         |            |
| status_dinas | ENUM(aktif, mutasi, pensiun, keluar) |            |
| tgl_masuk    | DATE                                 |            |
| tgl_keluar   | DATE NULL                            |            |
| created_at   | DATETIME                             |            |

---

### ğŸ‘¤ `users`

| Field         | Tipe            |
| ------------- | --------------- |
| id            | BIGINT PK       |
| anggota_id    | FK â†’ anggota.id |
| username      | VARCHAR(50)     |
| password_hash | TEXT            |
| role_id       | FK              |
| aktif         | BOOLEAN         |

---

### ğŸ›¡ï¸ `roles`

| id | nama     |
| -- | -------- |
| 1  | anggota  |
| 2  | pengurus |
| 3  | pengawas |
| 4  | admin    |

---

## ğŸ’° SIMPANAN

### `simpanan`

| Field      | Tipe                         |
| ---------- | ---------------------------- |
| id         | BIGINT PK                    |
| anggota_id | FK                           |
| jenis      | ENUM(pokok, wajib, sukarela) |
| periode    | DATE                         |
| nominal    | DECIMAL                      |
| created_at | DATETIME                     |

---

## ğŸ’³ PINJAMAN

### `pinjaman`

| Field        | Tipe                                                    |
| ------------ | ------------------------------------------------------- |
| id           | BIGINT PK                                               |
| anggota_id   | FK                                                      |
| tanggal      | DATE                                                    |
| nominal      | DECIMAL                                                 |
| tenor_bulan  | INT                                                     |
| bunga_persen | DECIMAL                                                 |
| status       | ENUM(draft, disetujui, ditolak, berjalan, lunas, macet) |
| created_at   | DATETIME                                                |

---

### `angsuran`

| Field       | Tipe                         |
| ----------- | ---------------------------- |
| id          | BIGINT PK                    |
| pinjaman_id | FK                           |
| bulan_ke    | INT                          |
| jatuh_tempo | DATE                         |
| pokok       | DECIMAL                      |
| bunga       | DECIMAL                      |
| total       | DECIMAL                      |
| dibayar     | DECIMAL                      |
| status      | ENUM(belum, sebagian, lunas) |

---

## ğŸ“Š TRANSAKSI KEUANGAN

### `transaksi_keuangan`

| Field      | Tipe                                            |
| ---------- | ----------------------------------------------- |
| id         | BIGINT PK                                       |
| tanggal    | DATE                                            |
| tipe       | ENUM(simpanan, pencairan, angsuran, biaya, shu) |
| ref_id     | BIGINT                                          |
| debit      | DECIMAL                                         |
| kredit     | DECIMAL                                         |
| keterangan | TEXT                                            |

---

## ğŸ§® SHU

### `shu_rekap`

| Field     | Tipe      |
| --------- | --------- |
| id        | BIGINT PK |
| tahun     | INT       |
| total_shu | DECIMAL   |
| disahkan  | BOOLEAN   |
| rat_id    | FK        |

---

### `shu_anggota`

| Field        | Tipe      |
| ------------ | --------- |
| id           | BIGINT PK |
| shu_rekap_id | FK        |
| anggota_id   | FK        |
| jasa_modal   | DECIMAL   |
| jasa_usaha   | DECIMAL   |
| total        | DECIMAL   |

---

## ğŸ“‘ RAT

### `rat`

| Field        | Tipe      |
| ------------ | --------- |
| id           | BIGINT PK |
| tahun        | INT       |
| tanggal      | DATE      |
| berita_acara | TEXT      |
| disahkan     | BOOLEAN   |

---

## ğŸ§¾ AUDIT

### `audit_log`

| Field   | Tipe        |
| ------- | ----------- |
| id      | BIGINT PK   |
| user_id | FK          |
| aksi    | TEXT        |
| tabel   | VARCHAR(50) |
| ref_id  | BIGINT      |
| waktu   | DATETIME    |

---

## ğŸ”— RELASI UTAMA (Ringkas)

```
anggota â”€â”€< simpanan
anggota â”€â”€< pinjaman â”€â”€< angsuran
anggota â”€â”€< shu_anggota >â”€â”€ shu_rekap â”€â”€ rat
users â”€â”€ roles
users â”€â”€< audit_log
```

---

# 2ï¸âƒ£ FLOW FRONTEND (LAYAR PER ROLE)

## ğŸ§â€â™‚ï¸ ANGGOTA

* Login
* Dashboard:

  * Total simpanan
  * Pinjaman aktif
  * Angsuran berjalan
  * Estimasi SHU
* Riwayat simpanan
* Riwayat pinjaman
* Ajukan pinjaman
* Lihat laporan SHU
* Profil (read-only)

---

## ğŸ‘” PENGURUS

* Dashboard koperasi
* Manajemen anggota
* Input simpanan
* Persetujuan pinjaman
* Monitoring angsuran
* Laporan keuangan
* Proses SHU
* Modul RAT

---

## ğŸ§‘â€âš–ï¸ PENGAWAS

* Dashboard audit
* Lihat semua laporan
* Riwayat transaksi
* Audit log
* Laporan RAT (read-only)

---

## ğŸ› ï¸ ADMIN

* User & role
* Konfigurasi koperasi
* Backup & restore
* Tahun buku
* Parameter SHU

---

# 3ï¸âƒ£ SKELETON BACKEND (API + FOLDER)

## ğŸ§± Struktur Folder (Node.js)

```
backend/
â”œâ”€â”€ app.js
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ database.js
â”‚   â”œâ”€â”€ auth.js
â”‚   â””â”€â”€ koperasi.js
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.routes.js
â”‚   â”œâ”€â”€ anggota.routes.js
â”‚   â”œâ”€â”€ simpanan.routes.js
â”‚   â”œâ”€â”€ pinjaman.routes.js
â”‚   â”œâ”€â”€ angsuran.routes.js
â”‚   â”œâ”€â”€ shu.routes.js
â”‚   â”œâ”€â”€ rat.routes.js
â”‚   â””â”€â”€ laporan.routes.js
â”œâ”€â”€ controllers/
â”œâ”€â”€ services/
â”œâ”€â”€ models/
â”œâ”€â”€ middlewares/
â”‚   â”œâ”€â”€ auth.middleware.js
â”‚   â”œâ”€â”€ role.middleware.js
â”‚   â””â”€â”€ audit.middleware.js
â”œâ”€â”€ utils/
â””â”€â”€ migrations/
```

---

## ğŸ”Œ CONTOH API ENDPOINT

### Auth

```
POST   /api/login
POST   /api/logout
```

### Anggota

```
GET    /api/anggota
POST   /api/anggota
GET    /api/anggota/:id
PATCH  /api/anggota/:id/status
```

### Simpanan

```
POST   /api/simpanan
GET    /api/simpanan/anggota/:id
```

### Pinjaman

```
POST   /api/pinjaman
POST   /api/pinjaman/:id/approve
GET    /api/pinjaman/aktif
```

### Angsuran

```
POST   /api/angsuran/bayar
GET    /api/angsuran/pinjaman/:id
```

### SHU

```
POST   /api/shu/hitung
GET    /api/shu/tahun/:tahun
```

### RAT

```
POST   /api/rat
POST   /api/rat/:id/sahkan
```

---

# ğŸ§© LANGKAH LANJUTAN â€“ DIKERJAKAN SEMUA

Urutan eksekusi (logis & aman):

1ï¸âƒ£ **SQL Installer + Migration (fondasi data)**
2ï¸âƒ£ **CRUD nyata per modul (backend logic)**
3ï¸âƒ£ **Mockup UI / Flow layar per halaman (frontend)**

---

# 1ï¸âƒ£ SQL INSTALLER + MIGRATION (FINAL & PRODUKSI)

## ğŸ“ Struktur

```
database/
â”œâ”€â”€ 00_create_database.sql
â”œâ”€â”€ 01_master_tables.sql
â”œâ”€â”€ 02_transaction_tables.sql
â”œâ”€â”€ 03_shu_rat_tables.sql
â”œâ”€â”€ 04_audit_tables.sql
â””â”€â”€ 99_seed_roles.sql
```

---

## ğŸ—„ï¸ `00_create_database.sql`

```sql
CREATE DATABASE ksp_polri
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;

USE ksp_polri;
```

---

## ğŸ§ `01_master_tables.sql`

```sql
CREATE TABLE anggota (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  nrp VARCHAR(20) UNIQUE NOT NULL,
  nama VARCHAR(100),
  pangkat VARCHAR(30),
  satuan VARCHAR(100),
  status_dinas ENUM('aktif','mutasi','pensiun','keluar') DEFAULT 'aktif',
  tgl_masuk DATE,
  tgl_keluar DATE,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE roles (
  id INT PRIMARY KEY,
  nama VARCHAR(30)
);

CREATE TABLE users (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  anggota_id BIGINT,
  username VARCHAR(50),
  password_hash TEXT,
  role_id INT,
  aktif BOOLEAN DEFAULT TRUE,
  FOREIGN KEY (anggota_id) REFERENCES anggota(id),
  FOREIGN KEY (role_id) REFERENCES roles(id)
);
```

---

## ğŸ’° `02_transaction_tables.sql`

```sql
CREATE TABLE simpanan (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  anggota_id BIGINT,
  jenis ENUM('pokok','wajib','sukarela'),
  periode DATE,
  nominal DECIMAL(15,2),
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (anggota_id) REFERENCES anggota(id)
);

CREATE TABLE pinjaman (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  anggota_id BIGINT,
  tanggal DATE,
  nominal DECIMAL(15,2),
  tenor_bulan INT,
  bunga_persen DECIMAL(5,2),
  status ENUM('draft','disetujui','ditolak','berjalan','lunas','macet'),
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (anggota_id) REFERENCES anggota(id)
);

CREATE TABLE angsuran (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  pinjaman_id BIGINT,
  bulan_ke INT,
  jatuh_tempo DATE,
  pokok DECIMAL(15,2),
  bunga DECIMAL(15,2),
  total DECIMAL(15,2),
  dibayar DECIMAL(15,2),
  status ENUM('belum','sebagian','lunas'),
  FOREIGN KEY (pinjaman_id) REFERENCES pinjaman(id)
);
```

---

## ğŸ§® `03_shu_rat_tables.sql`

```sql
CREATE TABLE rat (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  tahun INT,
  tanggal DATE,
  berita_acara TEXT,
  disahkan BOOLEAN DEFAULT FALSE
);

CREATE TABLE shu_rekap (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  tahun INT,
  total_shu DECIMAL(15,2),
  disahkan BOOLEAN DEFAULT FALSE,
  rat_id BIGINT,
  FOREIGN KEY (rat_id) REFERENCES rat(id)
);

CREATE TABLE shu_anggota (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  shu_rekap_id BIGINT,
  anggota_id BIGINT,
  jasa_modal DECIMAL(15,2),
  jasa_usaha DECIMAL(15,2),
  total DECIMAL(15,2),
  FOREIGN KEY (shu_rekap_id) REFERENCES shu_rekap(id),
  FOREIGN KEY (anggota_id) REFERENCES anggota(id)
);
```

---

## ğŸ§¾ `04_audit_tables.sql`

```sql
CREATE TABLE audit_log (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  user_id BIGINT,
  aksi TEXT,
  tabel VARCHAR(50),
  ref_id BIGINT,
  waktu DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

---

## ğŸŒ± `99_seed_roles.sql`

```sql
INSERT INTO roles VALUES
(1,'anggota'),
(2,'pengurus'),
(3,'pengawas'),
(4,'admin');
```

---

# 2ï¸âƒ£ CRUD NYATA PER MODUL (BACKEND LOGIC)

Saya ringkas tapi **realistis & bisa langsung dikodekan**.

---

## ğŸ§ Anggota

* Tambah anggota (NRP unik)
* Update status dinas
* List anggota aktif / nonaktif
* Detail anggota (full histori)

---

## ğŸ’° Simpanan

* Input simpanan (manual / bulk)
* Validasi simpanan pokok (1x)
* Rekap simpanan per anggota
* Rekap simpanan per periode

---

## ğŸ’³ Pinjaman

* Ajukan pinjaman
* Approve / reject
* Generate angsuran otomatis
* Freeze jika status anggota berubah
* Penandaan lunas / macet

---

## ğŸ§¾ Angsuran

* Bayar angsuran
* Bayar sebagian
* Deteksi tunggakan
* Rekap pinjaman aktif

---

## ğŸ§® SHU

* Hitung SHU tahunan
* Distribusi otomatis
* Simulasi sebelum RAT
* Lock SHU setelah disahkan

---

## ğŸ“‘ RAT

* Buat RAT per tahun
* Upload berita acara
* Sahkan RAT
* Kunci seluruh data tahun buku

---

## ğŸ›¡ï¸ Audit

* Semua POST/PATCH â†’ audit_log
* Tidak bisa dihapus
* Bisa difilter per user / tabel

---

# 3ï¸âƒ£ MOCKUP UI â€“ FLOW LAYAR PER HALAMAN

(*Deskripsi visual, siap diterjemahkan ke React / Vue / Blade*)

---

## ğŸ§â€â™‚ï¸ ANGGOTA

```
Login
 â†“
Dashboard
 - Total Simpanan
 - Pinjaman Aktif
 - Angsuran Bulan Ini
 - Estimasi SHU
 â†“
Riwayat Simpanan
Riwayat Pinjaman
Ajukan Pinjaman
Laporan SHU
Profil (read-only)
```

---

## ğŸ‘” PENGURUS

```
Dashboard Koperasi
 â†“
Anggota
 - Tambah
 - Ubah Status
 â†“
Simpanan
 - Input Bulanan
 - Rekap
 â†“
Pinjaman
 - Approval
 - Monitoring
 â†“
SHU
 - Hitung
 - Simulasi
 â†“
RAT
 - Buat
 - Sahkan
```

---

## ğŸ§‘â€âš–ï¸ PENGAWAS

```
Dashboard Audit
 â†“
Laporan Keuangan
 â†“
Transaksi
 â†“
Audit Log
 â†“
Laporan RAT
```

---

## ğŸ› ï¸ ADMIN

```
Manajemen User
Parameter Koperasi
Tahun Buku
Backup / Restore
```

---

# ğŸ PENUTUP (INI SUDAH LEVEL â€œSISTEM JADIâ€)

Dengan **SQL installer + CRUD + UI flow** ini:

* Tidak ada modul terlewat
* Bisa dikerjakan tim / solo
* Aman secara koperasi & institusi
* Siap dikembangkan bertahun-tahun

---

### ğŸ”¥ Langkah berikutnya (opsional tapi sangat powerful):

* ğŸ” Middleware auth + role enforcement
* ğŸ“Š Query laporan lengkap (harian/bulanan/RAT)
* ğŸ§ª Simulasi 1 koperasi POLRI penuh (end-to-end)
* ğŸ“„ Dokumentasi `.MD` resmi proyek







